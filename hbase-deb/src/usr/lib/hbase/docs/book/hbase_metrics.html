<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>15.4.&nbsp;HBase Metrics</title><link rel="stylesheet" type="text/css" href="../css/freebsd_docbook.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="book.html" title="The Apache HBase&#153; Reference Guide"><link rel="up" href="ops_mgt.html" title="Chapter&nbsp;15.&nbsp;Apache HBase Operational Management"><link rel="prev" href="node.management.html" title="15.3.&nbsp;Node Management"><link rel="next" href="ops.monitoring.html" title="15.5.&nbsp;HBase Monitoring"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">15.4.&nbsp;HBase Metrics</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="node.management.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;15.&nbsp;Apache HBase Operational Management</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ops.monitoring.html">Next</a></td></tr></table><hr></div><div class="section" title="15.4.&nbsp;HBase Metrics"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hbase_metrics"></a>15.4.&nbsp;HBase Metrics</h2></div></div></div><div class="section" title="15.4.1.&nbsp;Metric Setup"><div class="titlepage"><div><div><h3 class="title"><a name="metric_setup"></a>15.4.1.&nbsp;Metric Setup</h3></div></div></div><p>See <a class="link" href="http://hbase.apache.org/metrics.html" target="_top">Metrics</a> for
  an introduction and how to enable Metrics emission.  Still valid for HBase 0.94.x.
  </p><p>For HBase 0.95.x and up, see <a class="link" href="http://hadoop.apache.org/docs/current/api/org/apache/hadoop/metrics2/package-summary.html" target="_top">http://hadoop.apache.org/docs/current/api/org/apache/hadoop/metrics2/package-summary.html</a>
  </p></div><div class="section" title="15.4.2.&nbsp;Warning To Ganglia Users"><div class="titlepage"><div><div><h3 class="title"><a name="rs_metrics_ganglia"></a>15.4.2.&nbsp;Warning To Ganglia Users</h3></div></div></div><p>Warning to Ganglia Users:  by default, HBase will emit a LOT of metrics per RegionServer which may swamp your installation.
     Options include either increasing Ganglia server capacity, or configuring HBase to emit fewer metrics.
     </p></div><div class="section" title="15.4.3.&nbsp;Most Important RegionServer Metrics"><div class="titlepage"><div><div><h3 class="title"><a name="rs_metrics"></a>15.4.3.&nbsp;Most Important RegionServer Metrics</h3></div></div></div><div class="section" title="15.4.3.1.&nbsp;blockCacheExpressCachingRatio (formerly blockCacheHitCachingRatio)"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.blockCacheHitCachingRatio"></a>15.4.3.1.&nbsp;<code class="varname">blockCacheExpressCachingRatio (formerly blockCacheHitCachingRatio)</code></h4></div></div></div><p>Block cache hit caching ratio (0 to 100).  The cache-hit ratio for reads configured to look in the cache (i.e., cacheBlocks=true). </p></div><div class="section" title="15.4.3.2.&nbsp;callQueueLength"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.callQueueLength"></a>15.4.3.2.&nbsp;<code class="varname">callQueueLength</code></h4></div></div></div><p>Point in time length of the RegionServer call queue.  If requests arrive faster than the RegionServer handlers can process
          them they will back up in the callQueue.</p></div><div class="section" title="15.4.3.3.&nbsp;compactionQueueLength (formerly compactionQueueSize)"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.compactionQueueSize"></a>15.4.3.3.&nbsp;<code class="varname">compactionQueueLength (formerly compactionQueueSize)</code></h4></div></div></div><p>Point in time length of the compaction queue.  This is the number of Stores in the RegionServer that have been targeted for compaction.</p></div><div class="section" title="15.4.3.4.&nbsp;flushQueueSize"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.flushQueueSize"></a>15.4.3.4.&nbsp;<code class="varname">flushQueueSize</code></h4></div></div></div><p>Point in time number of enqueued regions in the MemStore awaiting flush.</p></div><div class="section" title="15.4.3.5.&nbsp;hdfsBlocksLocalityIndex"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.hdfsBlocksLocalityIndex"></a>15.4.3.5.&nbsp;<code class="varname">hdfsBlocksLocalityIndex</code></h4></div></div></div><p>Point in time percentage of HDFS blocks that are local to this RegionServer.  The higher the better.  </p></div><div class="section" title="15.4.3.6.&nbsp;memstoreSizeMB"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.memstoreSizeMB"></a>15.4.3.6.&nbsp;<code class="varname">memstoreSizeMB</code></h4></div></div></div><p>Point in time sum of all the memstore sizes in this RegionServer (MB).  Watch for this nearing or exceeding
          the configured high-watermark for MemStore memory in the RegionServer. </p></div><div class="section" title="15.4.3.7.&nbsp;numberOfOnlineRegions"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.regions"></a>15.4.3.7.&nbsp;<code class="varname">numberOfOnlineRegions</code></h4></div></div></div><p>Point in time number of regions served by the RegionServer.  This is an important metric to track for RegionServer-Region density.
          </p></div><div class="section" title="15.4.3.8.&nbsp;readRequestsCount"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.readRequestsCount"></a>15.4.3.8.&nbsp;<code class="varname">readRequestsCount</code></h4></div></div></div><p>Number of read requests for this RegionServer since startup.  Note:  this is a 32-bit integer and can roll. </p></div><div class="section" title="15.4.3.9.&nbsp;slowHLogAppendCount"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.slowHLogAppendCount"></a>15.4.3.9.&nbsp;<code class="varname">slowHLogAppendCount</code></h4></div></div></div><p>Number of slow HLog append writes for this RegionServer since startup, where "slow" is &gt; 1 second.  This is
          a good "canary" metric for HDFS. </p></div><div class="section" title="15.4.3.10.&nbsp;usedHeapMB"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.usedHeapMB"></a>15.4.3.10.&nbsp;<code class="varname">usedHeapMB</code></h4></div></div></div><p>Point in time amount of memory used by the RegionServer (MB).</p></div><div class="section" title="15.4.3.11.&nbsp;writeRequestsCount"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.writeRequestsCount"></a>15.4.3.11.&nbsp;<code class="varname">writeRequestsCount</code></h4></div></div></div><p>Number of write requests for this RegionServer since startup.  Note:  this is a 32-bit integer and can roll. </p></div></div><div class="section" title="15.4.4.&nbsp;Other RegionServer Metrics"><div class="titlepage"><div><div><h3 class="title"><a name="rs_metrics_other"></a>15.4.4.&nbsp;Other RegionServer Metrics</h3></div></div></div><div class="section" title="15.4.4.1.&nbsp;blockCacheCount"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.blockCacheCount"></a>15.4.4.1.&nbsp;<code class="varname">blockCacheCount</code></h4></div></div></div><p>Point in time block cache item count in memory.  This is the number of blocks of StoreFiles (HFiles) in the cache.</p></div><div class="section" title="15.4.4.2.&nbsp;blockCacheEvictedCount"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.blockCacheEvictedCount"></a>15.4.4.2.&nbsp;<code class="varname">blockCacheEvictedCount</code></h4></div></div></div><p>Number of blocks that had to be evicted from the block cache due to heap size constraints by RegionServer since startup.</p></div><div class="section" title="15.4.4.3.&nbsp;blockCacheFreeMB"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.blockCacheFree"></a>15.4.4.3.&nbsp;<code class="varname">blockCacheFreeMB</code></h4></div></div></div><p>Point in time block cache memory available (MB).</p></div><div class="section" title="15.4.4.4.&nbsp;blockCacheHitCount"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.blockCacheHitCount"></a>15.4.4.4.&nbsp;<code class="varname">blockCacheHitCount</code></h4></div></div></div><p>Number of blocks of StoreFiles (HFiles) read from the cache by RegionServer since startup.</p></div><div class="section" title="15.4.4.5.&nbsp;blockCacheHitRatio"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.blockCacheHitRatio"></a>15.4.4.5.&nbsp;<code class="varname">blockCacheHitRatio</code></h4></div></div></div><p>Block cache hit ratio (0 to 100) from RegionServer startup.  Includes all read requests, although those with cacheBlocks=false
           will always read from disk and be counted as a "cache miss", which means that full-scan MapReduce jobs can affect
           this metric significantly.</p></div><div class="section" title="15.4.4.6.&nbsp;blockCacheMissCount"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.blockCacheMissCount"></a>15.4.4.6.&nbsp;<code class="varname">blockCacheMissCount</code></h4></div></div></div><p>Number of blocks of StoreFiles (HFiles) requested but not read from the cache from RegionServer startup.</p></div><div class="section" title="15.4.4.7.&nbsp;blockCacheSizeMB"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.blockCacheSize"></a>15.4.4.7.&nbsp;<code class="varname">blockCacheSizeMB</code></h4></div></div></div><p>Point in time block cache size in memory (MB).  i.e., memory in use by the BlockCache</p></div><div class="section" title="15.4.4.8.&nbsp;fsPreadLatency*"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.fsPreadLatency"></a>15.4.4.8.&nbsp;<code class="varname">fsPreadLatency*</code></h4></div></div></div><p>There are several filesystem positional read latency (ms) metrics, all measured from RegionServer startup.</p></div><div class="section" title="15.4.4.9.&nbsp;fsReadLatency*"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.fsReadLatency"></a>15.4.4.9.&nbsp;<code class="varname">fsReadLatency*</code></h4></div></div></div><p>There are several filesystem read latency (ms) metrics, all measured from RegionServer startup.  The issue with
          interpretation is that ALL reads go into this metric (e.g., single-record Gets, full table Scans), including
          reads required for compactions.  This metric is only interesting "over time" when comparing
          major releases of HBase or your own code.</p></div><div class="section" title="15.4.4.10.&nbsp;fsWriteLatency*"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.fsWriteLatency"></a>15.4.4.10.&nbsp;<code class="varname">fsWriteLatency*</code></h4></div></div></div><p>There are several filesystem write latency (ms) metrics, all measured from RegionServer startup.  The issue with
          interpretation is that ALL writes go into this metric (e.g., single-record Puts, full table re-writes due to compaction).
          This metric is only interesting "over time" when comparing
          major releases of HBase or your own code.</p></div><div class="section" title="15.4.4.11.&nbsp;NumberOfStores"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.stores"></a>15.4.4.11.&nbsp;<code class="varname">NumberOfStores</code></h4></div></div></div><p>Point in time number of Stores open on the RegionServer.  A Store corresponds to a ColumnFamily.  For example,
          if a table (which contains the column family) has 3 regions on a RegionServer, there will be 3 stores open for that
          column family. </p></div><div class="section" title="15.4.4.12.&nbsp;NumberOfStorefiles"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.storeFiles"></a>15.4.4.12.&nbsp;<code class="varname">NumberOfStorefiles</code></h4></div></div></div><p>Point in time number of StoreFiles open on the RegionServer.  A store may have more than one StoreFile (HFile).</p></div><div class="section" title="15.4.4.13.&nbsp;requestsPerSecond"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.requests"></a>15.4.4.13.&nbsp;<code class="varname">requestsPerSecond</code></h4></div></div></div><p>Point in time number of read and write requests.  Requests correspond to RegionServer RPC calls,
           thus a single Get will result in 1 request, but a Scan with caching set to 1000 will result in 1 request for each 'next' call
            (i.e., not each row).  A bulk-load request will constitute 1 request per HFile.
            This metric is less interesting than readRequestsCount and writeRequestsCount in terms of measuring activity
            due to this metric being periodic. </p></div><div class="section" title="15.4.4.14.&nbsp;storeFileIndexSizeMB"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.regionserver.storeFileIndexSizeMB"></a>15.4.4.14.&nbsp;<code class="varname">storeFileIndexSizeMB</code></h4></div></div></div><p>Point in time sum of all the StoreFile index sizes in this RegionServer (MB)</p></div></div></div><div id="disqus_thread"></div><script type="text/javascript">
    var disqus_shortname = 'hbase'; // required: replace example with your forum shortname
    var disqus_url = 'http://hbase.apache.org/book';
    var disqus_identifier = 'hbase_metrics';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="node.management.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ops_mgt.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ops.monitoring.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">15.3.&nbsp;Node Management&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;15.5.&nbsp;HBase Monitoring</td></tr></table></div></body></html>